# Example RustSocks configuration with dashboard authentication
# This demonstrates the new session-based authentication with Altcha CAPTCHA support

[server]
bind_address = "127.0.0.1"
bind_port = 1080
max_connections = 1000

[auth]
client_method = "none"
socks_method = "none"

[sessions]
enabled = true
storage = "memory"
stats_api_enabled = true
stats_api_bind_address = "127.0.0.1"
stats_api_port = 9090
swagger_enabled = true
dashboard_enabled = true

# Base path for dashboard (optional)
# Uncomment to serve dashboard at http://127.0.0.1:9090/rustsocks instead of root
# base_path = "/rustsocks"

[sessions.dashboard_auth]
# Enable dashboard authentication (required for login page)
enabled = true

# ===== Altcha CAPTCHA Configuration =====
# Altcha is a self-hosted, privacy-first proof-of-work CAPTCHA
# It works completely offline without external services or Sentinel module
#
# How it works:
# 1. Server generates a challenge (HMAC-signed hash)
# 2. User's browser solves proof-of-work puzzle (finds secret number)
# 3. Server verifies the solution
#
# Enable Altcha on login page
# Default: false (simple username/password login)
altcha_enabled = false

# External Altcha challenge URL (optional)
# Leave commented to use built-in self-hosted endpoint
# Or specify external API if you prefer:
# altcha_challenge_url = "https://eu.altcha.org/api/v1/challenge?apiKey=YOUR_API_KEY"
#
# Built-in endpoint works at: /api/auth/altcha-challenge
# - No external dependencies
# - Respects base_path configuration
# - HMAC-SHA256 signed challenges
# - Configurable difficulty (maxnumber)

# Session secret for token generation
# IMPORTANT: Change this to a random, secure value in production!
session_secret = "change-me-to-very-long-random-secret-string-please"

# Session duration in hours (default: 24)
session_duration_hours = 24

# Dashboard users (username/password authentication)
[[sessions.dashboard_auth.users]]
username = "admin"
password = "admin123"  # Change this in production!

[[sessions.dashboard_auth.users]]
username = "monitor"
password = "monitor456"

# Optional: Add more users as needed
# [[sessions.dashboard_auth.users]]
# username = "operator"
# password = "secure-password"
