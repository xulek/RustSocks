[server]
bind_address = "127.0.0.1"
bind_port = 1080
max_connections = 10000

[server.tls]
enabled = false
require_client_auth = false
alpn_protocols = []

[server.pool]
enabled = true
max_idle_per_dest = 8
max_total_idle = 200
idle_timeout_secs = 120
connect_timeout_ms = 3000

[auth]
client_method = "none"
socks_method = "none"

[[auth.users]]
username = "alice"
password = "secret123"

[auth.pam]
username_service = "rustsocks"
address_service = "rustsocks-client"
default_user = "rhostusr"
default_ruser = "rhostusr"
verbose = false
verify_service = false

[auth.gssapi]
service_name = "socks"
protection_level = "integrity"
verbose = false

[logging]
level = "info"
format = "pretty"

[acl]
enabled = true
config_file = "config/acl.toml"
watch = true
anonymous_user = "anonymous"

[sessions]
enabled = true
storage = "sqlite"
database_url = "sqlite://sessions.db"
# For MariaDB/MySQL use something like:
# database_url = "mysql://user:pass@host:3306/rustsocks_sessions"
batch_size = 400
batch_interval_ms = 250
retention_days = 90
cleanup_interval_hours = 24
traffic_update_packet_interval = 10
stats_window_hours = 24
stats_api_enabled = true
stats_api_bind_address = "127.0.0.1"
stats_api_port = 9090
swagger_enabled = true
dashboard_enabled = true
base_path = "/rustsocks"

[sessions.dashboard_auth]
enabled = true
altcha_enabled = true
session_secret = "your-super-secret-random-string-here"
session_duration_hours = 24

[[sessions.dashboard_auth.users]]
username = "admin"
password = "admin"

[metrics]
enabled = true
storage = "sqlite"
retention_hours = 24
cleanup_interval_hours = 6
collection_interval_secs = 5

[telemetry]
enabled = true
max_events = 256
retention_hours = 6

[qos]
enabled = true
algorithm = "htb"

[qos.htb]
global_bandwidth_bytes_per_sec = 125000000
guaranteed_bandwidth_bytes_per_sec = 131072
max_bandwidth_bytes_per_sec = 12500000
burst_size_bytes = 1048576
refill_interval_ms = 50
fair_sharing_enabled = true
rebalance_interval_ms = 100
idle_timeout_secs = 5

[qos.connection_limits]
max_connections_per_user = 10000
max_connections_global = 10000
